# Use Playwright base image with Node.js 18
FROM mcr.microsoft.com/playwright:v1.42.0-jammy

# Set working directory
WORKDIR /app

# Copy package.json and package-lock.json
COPY package*.json ./

# Install dependencies (including Playwright)
RUN npm ci --unsafe-perm

# Install additional global libraries (e.g., eslint, typescript)
RUN npm install -g eslint typescript

# Copy the rest of the application files
COPY . .

# Set correct permissions (if needed)
RUN chown -R pwuser:pwuser /app

# Switch to non-root user (optional but recommended)
USER pwuser

# Default command
CMD ["npx", "playwright", "test"]

---------------------------------------------------------------------------------------------------------------------
